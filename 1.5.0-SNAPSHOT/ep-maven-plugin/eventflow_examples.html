<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 at 2019-01-22 
 | Rendered using Apache Maven Fluido Skin 1.6
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20190122" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Event Processing Maven Plugin &#x2013; EventFlow fragment examples</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.6.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
      <script type="text/javascript" src="./js/apache-maven-fluido-1.6.min.js"></script>
      </head>
    <body class="topBarDisabled">
      <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>Event Processing Maven Plugin</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2019-01-22<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.5.0-SNAPSHOT</li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://devzone.tibco.com/display/comp/TIBCO+Component+Exchange" class="externalLink" title="Component Exchange">Component Exchange</a></li>
      <li class="pull-right"><a href="https://devzone.tibco.com/dashboard.action" class="externalLink" title="DevZone">DevZone</a></li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
          <li class="nav-header">Overview</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a>  </li>
    <li><a href="usage.html" title="Usage"><span class="icon-chevron-down"></span>Usage</a>
      <ul class="nav nav-list">
    <li><a href="general_examples.html" title="General examples"><span class="none"></span>General examples</a>  </li>
    <li><a href="java_examples.html" title="Java fragment examples"><span class="none"></span>Java fragment examples</a>  </li>
    <li><a href="java_jar_examples.html" title="Java jar examples"><span class="none"></span>Java jar examples</a>  </li>
    <li class="active"><a href="#"><span class="none"></span>EventFlow fragment examples</a>
  </li>
    <li><a href="liveview_examples.html" title="LiveView fragment examples"><span class="none"></span>LiveView fragment examples</a>  </li>
    <li><a href="application_examples.html" title="Application examples"><span class="none"></span>Application examples</a>  </li>
    <li><a href="contint_examples.html" title="CI examples"><span class="none"></span>CI examples</a>  </li>
    <li><a href="cloud_examples.html" title="Cloud examples"><span class="none"></span>Cloud examples</a>  </li>
      </ul>
  </li>
    <li><a href="goals.html" title="Goals"><span class="icon-chevron-right"></span>Goals</a>  </li>
          <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a>  </li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a>  </li>
  </ul>
          <hr />
          <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
  <a href="http://www.tibco.com/" title="Tibco" class="builtBy"><img class="builtBy"  alt="Tibco" src="images/Tibco.svg"    /></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>EventFlow fragment examples</h1>
<ul>

<li><a href="#directory-structure">Directory structure</a></li>
<li><a href="#basic-build-sbunit-test-and-install">Basic build, sbunit test and install</a></li>
<li><a href="#calling-out-to-java">Calling out to java</a></li>
<li><a href="#external-dependency">External dependency</a></li>
<li><a href="#building-native-libraries">Building native libraries</a></li>
<li><a href="#third-party-native-libraries">Third party native libraries</a></li>
<li><a href="#multiple-sbapps">Multiple sbapps</a></li>
<li><a href="#java-adapters">Java adapters</a></li>
<li><a href="#eventflow-fragment-referencing-another-eventflow-fragment">EventFlow fragment referencing another EventFlow fragment</a></li>
</ul>
<h1>Directory structure</h1>
<p>The recommended EventFlow directory structure is :</p>
<p><img src="uml/eventflow-structure.svg" alt="EventFlow directory structure" /></p>
<p>Note that the default source directory is set by the plugin to src/main/eventflow.</p>
<div class="section">
<h2><a name="Basic_build.2C_sbunit_test_and_install"></a>Basic build, sbunit test and install</h2>
<p>The following pom.xml will build, unit test and install to the local maven repository, an eventflow fragment.</p>

<div>
<div>
<pre class="source">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;

    &lt;!-- vim: set tabstop=4 softtabstop=0 expandtab shiftwidth=4 smarttab : --&gt;

    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;com.tibco.ep&lt;/groupId&gt;
    &lt;artifactId&gt;effrag&lt;/artifactId&gt;
    &lt;packaging&gt;ep-eventflow-fragment&lt;/packaging&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;
    &lt;name&gt;hello world&lt;/name&gt;

    &lt;!-- common definitions for this version of StreamBase --&gt;
    &lt;parent&gt;
        &lt;groupId&gt;com.tibco.ep.sb.parent&lt;/groupId&gt;
        &lt;artifactId&gt;ep-eventflow-fragment&lt;/artifactId&gt;
        &lt;version&gt;10.4.0&lt;/version&gt;
    &lt;/parent&gt;

&lt;/project&gt;
</pre></div></div>

<p>When the maven install goal is called (mvn install), this pom.xml instructs maven to perform the following steps :</p>
<ol style="list-style-type: decimal">

<li>

<p>Uses <a class="externalLink" href="https://tibcosoftware.github.io/tibco-streaming-maven-plugin/1.5.0-SNAPSHOT/ep-maven-plugin/install-product-mojo.html">install-product</a> to check if the dependent product ( in this case com.tibco.ep.thirdparty:tibco-sb_linuxx86_64 ) is installed.  If its not, maven will download the archive and the plugin will extract into $TIBCO_EP_HOME.</p>
</li>
<li>

<p>Uses the standard maven plugin <a class="externalLink" href="https://maven.apache.org/plugins/maven-compiler-plugin/testCompile-mojo.html">maven-compiler-plugin:testCompile</a> to compile any java test sources to class files.</p>
</li>
<li>

<p>Uses <a class="externalLink" href="https://tibcosoftware.github.io/tibco-streaming-maven-plugin/1.5.0-SNAPSHOT/ep-maven-plugin/start-nodes-mojo.html">start-nodes</a> to start a test cluster.<br />
Since this pom.xml has no configuration, a single node is started A.${artifactId} (ie A.goldylocks in this example) with a random but unused discovery port.</p>
</li>
<li>

<p>Uses <a class="externalLink" href="https://tibcosoftware.github.io/tibco-streaming-maven-plugin/1.5.0-SNAPSHOT/ep-maven-plugin/test-java-fragment-mojo.html">test-java-fragment</a> to launch sbunit on the cluster and report the test results.  Should the test cases fail then no further processing occurs.</p>
</li>
<li>

<p>Uses <a class="externalLink" href="https://tibcosoftware.github.io/tibco-streaming-maven-plugin/1.5.0-SNAPSHOT/ep-maven-plugin/stop-nodes-mojo.html">stop-nodes</a> to stop and remove the test nodes</p>
</li>
<li>

<p>Uses <a class="externalLink" href="https://tibcosoftware.github.io/tibco-streaming-maven-plugin/1.5.0-SNAPSHOT/ep-maven-plugin/package-eventflow-fragment-mojo.html">package-eventflow-fragment</a> to create a EventFlow fragment zip file in the build directory (by default, set to target) and attaches it to the build.</p>
</li>
<li>

<p>Uses the standard maven plugin <a class="externalLink" href="https://maven.apache.org/plugins/maven-install-plugin/install-mojo.html">maven-install-plugin:install</a> to install the built and tested artifacts to the local maven repository.</p>
</li>
</ol>
<p>The EventFlow fragment application code, test cases and sbunit are deployed to the test node :</p>
<p><img src="uml/one-node-sbunit.svg" alt="One node sbunit test" /></p>
<p>An example run is shown below :</p>

<div>
<div>
<pre class="source">$ mvn install
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building EventFlow Fragment - GoldyLocks 3.0.0
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- ep-maven-plugin:1.0.0:install-product (default-install-product-1) @ goldylocks ---
[INFO] com.tibco.ep.thirdparty:tibco-sb_osxx86_64:zip:7.6.0:test already installed
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.4:create-timestamp (default) @ goldylocks ---
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ goldylocks ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- ep-maven-plugin:1.0.0:start-nodes (default-start-nodes) @ goldylocks ---
[INFO] [A.goldylocks] Running &quot;install node&quot;
[INFO] [dtm]    Installing node
[INFO] [dtm]        DEVELOPMENT executables
[INFO] [dtm]        File shared memory
[INFO] [dtm]        7 concurrent allocation segments
[INFO] [dtm]        Host name plordmac
[INFO] [dtm]        Container tibco/dtm
[INFO] [dtm]        Starting container services
[INFO] [dtm]        Loading node configuration
[INFO] [dtm]        Auditing node security
[INFO] [dtm]        Administration port is 11072
[INFO] [dtm]        Service name is A.goldylocks
[INFO] [dtm]    Node installed
[INFO] [A.goldylocks] Finished &quot;install node&quot;
[INFO] [goldylocks] Running &quot;start node&quot;
[INFO] Node           Status                       
[INFO] [A.goldylocks] Start node                   
[INFO] [A.goldylocks] Loading node configuration   
[INFO] [A.goldylocks] Auditing node security       
[INFO] [A.goldylocks] Host name plordmac           
[INFO] [A.goldylocks] Administration port is 11072 
[INFO] [A.goldylocks] Service name is A.goldylocks 
[INFO] [A.goldylocks] Node started                 
[INFO] [goldylocks] Finished &quot;start node&quot;
[INFO] 
[INFO] --- ep-maven-plugin:1.0.0:test-eventflow-fragment (default-test-eventflow-fragment) @ goldylocks ---
[INFO] [dtm] INFO: Deployment tool version: [TIBCO Distributed Transactional Memory Platform 3.0.0 (build 160201)] starting at [Mon Feb 01 14:19:46 GMT 2016]
[INFO] [dtm] INFO: Node version: [TIBCO Distributed Transactional Memory Platform 3.0.0 (build 160201)]
[INFO] [dtm] INFO: Starting com.tibco.ep.buildmavenplugin.surefire.Runner on node A.goldylocks ...
[INFO] [dtm] INFO: com.tibco.ep.buildmavenplugin.surefire.Runner started on JVM com_tibco_ep_buildmavenplugin_surefire_Runner0 on node A.goldylocks.
[INFO] [A.goldylocks] 
[INFO] [A.goldylocks] -------------------------------------------------------
[INFO] [A.goldylocks] T E S T S
[INFO] [A.goldylocks] -------------------------------------------------------
[INFO] [A.goldylocks] Running com.tibco.sb.test.GoldylocksTest
[INFO] [A.goldylocks] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 4.502 sec
[INFO] [A.goldylocks] 
[INFO] [A.goldylocks] Results :
[INFO] [A.goldylocks] 
[INFO] [A.goldylocks] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0
[INFO] [A.goldylocks] 
[INFO] [dtm] INFO: JVM com_tibco_ep_buildmavenplugin_surefire_Runner0 exited with status [0]
[INFO] [goldylocks] Finished &quot;junit&quot;
[INFO] 
[INFO] --- ep-maven-plugin:1.0.0:stop-nodes (default-stop-nodes-1) @ goldylocks ---
[INFO] [goldylocks] Running &quot;stop node&quot;
[INFO] Node           Status                                                              
[INFO] [A.goldylocks] Stopping node                                                       
[INFO] [A.goldylocks] Dtm::distribution stopping                                          
[INFO] [A.goldylocks] application::com_tibco_ep_buildmavenplugin_surefire_Runner0 stopped 
[INFO] [A.goldylocks] Node stopped                                                        
[INFO] [goldylocks] Finished &quot;stop node&quot;
[INFO] [goldylocks] Running &quot;remove node&quot;
[INFO] Node           Status                           
[INFO] [A.goldylocks] Removing node                    
[INFO] [A.goldylocks] Shutting down container services 
[INFO] [A.goldylocks] Removing node directory          
[INFO] [A.goldylocks] Node removed                     
[INFO] [goldylocks] Finished &quot;remove node&quot;
[INFO] 
[INFO] --- ep-maven-plugin:1.0.0:package-eventflow-fragment (default-package-eventflow-fragment) @ goldylocks ---
[INFO] Building zip: /Users/plord/workspace/dtmexamples/eventflow-fragments/goldylocks/target/goldylocks-3.0.0-ep-eventflow-fragment.zip
[INFO] 
[INFO] &gt;&gt;&gt; maven-source-plugin:2.4:jar (attach-sources) &gt; generate-sources @ goldylocks &gt;&gt;&gt;
[INFO] 
[INFO] --- ep-maven-plugin:1.0.0:install-product (default-install-product-1) @ goldylocks ---
[INFO] com.tibco.ep.thirdparty:tibco-sb_osxx86_64:zip:7.6.0:test already installed
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.4:create-timestamp (default) @ goldylocks ---
[INFO] 
[INFO] &lt;&lt;&lt; maven-source-plugin:2.4:jar (attach-sources) &lt; generate-sources @ goldylocks &lt;&lt;&lt;
[INFO] 
[INFO] --- maven-source-plugin:2.4:jar (attach-sources) @ goldylocks ---
[INFO] 
[INFO] --- maven-javadoc-plugin:2.10.3:jar (attach-javadocs) @ goldylocks ---
[INFO] Not executing Javadoc as the project is not a Java classpath-capable package
[INFO] 
[INFO] --- maven-install-plugin:2.5.2:install (default-install) @ goldylocks ---
[INFO] No primary artifact to install, installing attached artifacts instead.
[INFO] Installing /Users/plord/workspace/dtmexamples/eventflow-fragments/goldylocks/pom.xml to /Users/plord/workspace/BUILD/repository/com/tibco/ep/dtmexamples/eventflowfragment/goldylocks/3.0.0/goldylocks-3.0.0.pom
[INFO] Installing /Users/plord/workspace/dtmexamples/eventflow-fragments/goldylocks/target/goldylocks-3.0.0-ep-eventflow-fragment.zip to /Users/plord/workspace/BUILD/repository/com/tibco/ep/dtmexamples/eventflowfragment/goldylocks/3.0.0/goldylocks-3.0.0-ep-eventflow-fragment.zip
[INFO] Installing /Users/plord/workspace/dtmexamples/eventflow-fragments/goldylocks/target/goldylocks-3.0.0-sources.jar to /Users/plord/workspace/BUILD/repository/com/tibco/ep/dtmexamples/eventflowfragment/goldylocks/3.0.0/goldylocks-3.0.0-sources.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 27.410 s
[INFO] Finished at: 2016-02-01T14:20:02+00:00
[INFO] Final Memory: 38M/580M
[INFO] ------------------------------------------------------------------------
</pre></div></div>
</div>
<div class="section">
<h2><a name="Calling_out_to_java"></a>Calling out to java</h2>
<p>Java code that needs to be included with the application can be placed in java source directory ( src/main/java ).  This code will be added to the fragment and included with any test cases.</p></div>
<div class="section">
<h2><a name="External_dependency"></a>External dependency</h2>
<p>External java (jar) dependencies can be added to the maven pom.xml - these are then included in build, test and package steps.</p>
<p>For example :</p>

<div>
<div>
<pre class="source">...
    &lt;dependencies&gt;

        &lt;!-- compile, test and deploy dependencies --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.jpos&lt;/groupId&gt;
            &lt;artifactId&gt;jpos&lt;/artifactId&gt;
            &lt;version&gt;1.6.8&lt;/version&gt;
        &lt;/dependency&gt;

        ...

    &lt;/dependencies&gt;
...
</pre></div></div>
</div>
<div class="section">
<h2><a name="Building_native_libraries"></a>Building native libraries</h2>
<p>Whilst a maven build could use <a class="externalLink" href="http://www.mojohaus.org/exec-maven-plugin/">exec-maven-plugin</a> to call the native toolchain ( make, g++ etc ), the maven plugin <a class="externalLink" href="http://maven-nar.github.io/">nar-maven-plugin</a> is recommended - this plugin performs the native build and creates a nar archive.  The nar archive can be treated like any other maven dependency.</p>
<p>An example of creating a nar archive is shown below :</p>

<div>
<div>
<pre class="source">&lt;project&gt;

    &lt;groupId&gt;com.tibco.ep.dtmexamples.eventflowfragment&lt;/groupId&gt;
    &lt;artifactId&gt;cpp-lib&lt;/artifactId&gt;
    &lt;packaging&gt;nar&lt;/packaging&gt;
    &lt;version&gt;3.0.0&lt;/version&gt;
    
    ....
   
    &lt;build&gt;

        &lt;plugins&gt;

            &lt;plugin&gt;
                &lt;groupId&gt;com.github.maven-nar&lt;/groupId&gt;
                &lt;artifactId&gt;nar-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.2.0&lt;/version&gt;
                &lt;extensions&gt;true&lt;/extensions&gt;
                &lt;configuration&gt;
                    &lt;libraries&gt;
                        &lt;library&gt;
                            &lt;type&gt;jni&lt;/type&gt;
                            &lt;narSystemPackage&gt;com.tibco.ep.dtmexamples.eventflowfragment.sbappcallscpp&lt;/narSystemPackage&gt;
                        &lt;/library&gt;
                    &lt;/libraries&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;

        &lt;/plugins&gt;

    &lt;/build&gt;

&lt;/project&gt;
</pre></div></div>

<p>A EventFlow fragment can then use this nar archive :</p>

<div>
<div>
<pre class="source">...
    &lt;!-- common definitions for this version of StreamBase --&gt;
    &lt;parent&gt;
        &lt;groupId&gt;com.tibco.ep.sb.parent&lt;/groupId&gt;
        &lt;artifactId&gt;ep-eventflow-fragment&lt;/artifactId&gt;
        &lt;version&gt;10.4.0&lt;/version&gt;
    &lt;/parent&gt;
...
    &lt;dependencies&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.tibco.ep.dtmexamples.eventflowfragment&lt;/groupId&gt;
            &lt;artifactId&gt;cpp-lib&lt;/artifactId&gt;
            &lt;version&gt;3.0.0&lt;/version&gt;
            &lt;type&gt;nar&lt;/type&gt;
            &lt;classifier&gt;amd64-Linux-gpp-jni&lt;/classifier&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.tibco.ep.dtmexamples.eventflowfragment&lt;/groupId&gt;
            &lt;artifactId&gt;cpp-lib&lt;/artifactId&gt;
            &lt;version&gt;3.0.0&lt;/version&gt;
            &lt;type&gt;nar&lt;/type&gt;
            &lt;classifier&gt;x86_64-MacOSX-gpp-jni&lt;/classifier&gt;
        &lt;/dependency&gt;
        
        ....
        
    &lt;/dependencies&gt;
...
</pre></div></div>

<p>Note that if the nar module is built on different platforms, the EventFlow fragment module will add all architectures to the fragment zip.</p>
<p>See <a class="externalLink" href="http://maven-nar.github.io/aol.html">aol</a> for the list of Architecture-OperatingSystem-Linker (AOL) values references in the classifer above.  The maven plugin will map these to the internal paths when the fragment is built.</p></div>
<div class="section">
<h2><a name="Third_party_native_libraries"></a>Third party native libraries</h2>
<p>Its also possible to build a nar archive containing shared libraries from a third party - ie when the source isn&#x2019;t available.  The directory structure for such a nar project is :</p>
<p><img src="uml/thirdparty-nar-structure.svg" alt="Nar directory structure" /></p>
<p>The pom.xml for this project will use the nar-maven-plugin and specify shared libraries :</p>

<div>
<div>
<pre class="source">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;com.example&lt;/groupId&gt;
    &lt;artifactId&gt;thirdpartylibs&lt;/artifactId&gt;
    &lt;packaging&gt;nar&lt;/packaging&gt;
    &lt;name&gt;ThirdParty Shared Libraries&lt;/name&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;

    &lt;parent&gt;
        &lt;groupId&gt;com.tibco.ep.sb.parent&lt;/groupId&gt;
        &lt;artifactId&gt;common&lt;/artifactId&gt;
        &lt;version&gt;10.4.0&lt;/version&gt;
        &lt;relativePath/&gt;
    &lt;/parent&gt;  

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;com.github.maven-nar&lt;/groupId&gt;
                &lt;artifactId&gt;nar-maven-plugin&lt;/artifactId&gt;
                &lt;extensions&gt;true&lt;/extensions&gt;
                &lt;configuration&gt;
                    &lt;libraries&gt;
                        &lt;library&gt;
                            &lt;type&gt;shared&lt;/type&gt;
                        &lt;/library&gt;
                    &lt;/libraries&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

&lt;/project&gt;
</pre></div></div>

<p>The built artifact can then be added to a project as a normal maven dependency and the shared libraries will be included in the runtime library path.</p>

<div>
<div>
<pre class="source">    &lt;!-- Bring in right shared library for this platform --&gt;
    &lt;profiles&gt;
        &lt;profile&gt;
            &lt;id&gt;linux profile&lt;/id&gt;
            &lt;activation&gt;
                &lt;os&gt;&lt;name&gt;linux&lt;/name&gt;&lt;/os&gt;
            &lt;/activation&gt;
            &lt;dependencies&gt;
                &lt;dependency&gt;
                    &lt;groupId&gt;com.example&lt;/groupId&gt;
                    &lt;artifactId&gt;thirdpartylibs&lt;/artifactId&gt;
                    &lt;version&gt;1.0.0&lt;/version&gt;
                    &lt;type&gt;nar&lt;/type&gt;
                    &lt;classifier&gt;amd64-Linux-gpp-shared&lt;/classifier&gt;
                &lt;/dependency&gt;
            &lt;/dependencies&gt;
        &lt;/profile&gt;
        &lt;profile&gt;
            &lt;id&gt;mac profile&lt;/id&gt;
            &lt;activation&gt;
                &lt;os&gt;&lt;name&gt;mac os x&lt;/name&gt;&lt;/os&gt;
            &lt;/activation&gt;
            &lt;dependencies&gt;
                &lt;dependency&gt;
                    &lt;groupId&gt;com.example&lt;/groupId&gt;
                    &lt;artifactId&gt;thirdpartylibs&lt;/artifactId&gt;
                    &lt;version&gt;1.0.0&lt;/version&gt;
                    &lt;type&gt;nar&lt;/type&gt;
                    &lt;classifier&gt;x86_64-MacOSX-gpp-shared&lt;/classifier&gt;
                &lt;/dependency&gt;
            &lt;/dependencies&gt;
        &lt;/profile&gt;
        &lt;profile&gt;
            &lt;id&gt;windows profile&lt;/id&gt;
            &lt;activation&gt;
                &lt;property&gt;
                    &lt;name&gt;path.separator&lt;/name&gt;
                    &lt;value&gt;;&lt;/value&gt;
                &lt;/property&gt;
            &lt;/activation&gt;
            &lt;dependencies&gt;
                &lt;dependency&gt;
                    &lt;groupId&gt;com.example&lt;/groupId&gt;
                    &lt;artifactId&gt;thirdpartylibs&lt;/artifactId&gt;
                    &lt;version&gt;1.0.0&lt;/version&gt;
                    &lt;type&gt;nar&lt;/type&gt;
                    &lt;classifier&gt;amd64-Windows-msvc-shared&lt;/classifier&gt;
                &lt;/dependency&gt;
            &lt;/dependencies&gt;
        &lt;/profile&gt;
    &lt;/profiles&gt;
</pre></div></div>
</div>
<div class="section">
<h2><a name="Multiple_sbapps"></a>Multiple sbapps</h2>
<p>There is no difference between a fragment consisting of one sbapp file and a fragment consisting of multiple sbapp files.  Multiple sbapp and sbint files are added to the EventFlow fragment.</p></div>
<div class="section">
<h2><a name="Java_adapters"></a>Java adapters</h2>
<p>EventFlow adapters written in java can be built in a maven module with a packaging type of jar and use a EventFlow application with sbunit to test.</p>
<p>An example pom.xml file for an adapter is shown below :</p>

<div>
<div>
<pre class="source">...
    &lt;groupId&gt;com.tibco.ep.dtmexamples.eventflowfragment&lt;/groupId&gt;
    &lt;artifactId&gt;adapter&lt;/artifactId&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;
    &lt;version&gt;3.0.0&lt;/version&gt;
...
    &lt;!-- common definitions for this version of StreamBase --&gt;
    &lt;parent&gt;
        &lt;groupId&gt;com.tibco.ep.sb.parent&lt;/groupId&gt;
        &lt;artifactId&gt;ep-java-fragment&lt;/artifactId&gt;
        &lt;version&gt;10.4.0&lt;/version&gt;
    &lt;/parent&gt;
...
</pre></div></div>

<p>To use this adapter in a EventFlow application just set as a dependency :</p>

<div>
<div>
<pre class="source">    &lt;dependencies&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.tibco.ep.dtmexamples.eventflowfragment&lt;/groupId&gt;
            &lt;artifactId&gt;adapter&lt;/artifactId&gt;
            &lt;version&gt;3.0.0&lt;/version&gt;
        &lt;/dependency&gt;

        ....
</pre></div></div>
</div>
<div class="section">
<h2><a name="EventFlow_fragment_referencing_another_EventFlow_fragment"></a>EventFlow fragment referencing another EventFlow fragment</h2>
<p>To import a EventFlow application add the fragment to the pom.xml dependencies :-</p>

<div>
<div>
<pre class="source">    &lt;dependencies&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.tibco.ep.dtmexamples.eventflowfragment&lt;/groupId&gt;
            &lt;artifactId&gt;sbapp-calls-adapter&lt;/artifactId&gt;
            &lt;version&gt;3.0.0&lt;/version&gt;
            &lt;type&gt;ep-eventflow-fragment&lt;/type&gt;
        &lt;/dependency&gt;

        ....
</pre></div></div>

<p>The maven plugin will extract this fragment dependency into the target directory and referenced in test cases.  Note that the extracted dependency is not included in the built fragment zip.</p></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2018&#x2013;2019
<a href="http://www.tibco.com">TIBCO Software Inc.</a>.
All rights reserved.</p>
        </div>
        </div>
    </footer>
    </body>
</html>
